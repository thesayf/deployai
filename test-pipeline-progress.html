<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline Progress Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }
        .animate-shine {
            animation: shine 2s infinite;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-2 text-center">
            Creating Your AI Implementation Report
        </h2>
        <p class="text-gray-600 mb-8 text-center">
            Our AI is analyzing your responses and building personalized recommendations
        </p>
        
        <!-- Stage description -->
        <div class="mb-6 text-center">
            <p class="text-gray-600 text-sm" id="stage-description">
                Analyzing your business context and identifying key opportunities...
            </p>
        </div>

        <!-- Main progress bar -->
        <div class="relative mb-8">
            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                <div id="progress-bar" 
                    class="bg-gradient-to-r from-blue-500 to-blue-700 h-3 rounded-full transition-all duration-700 ease-out relative"
                    style="width: 0%">
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shine"></div>
                </div>
            </div>
            <div id="progress-text" class="absolute -top-6 transition-all duration-700" style="left: 0%">
                <span class="text-xs font-bold text-gray-700">0%</span>
            </div>
        </div>
        
        <!-- Stage indicators -->
        <div class="flex justify-between mb-6">
            <div class="flex flex-col items-center flex-1" id="stage1">
                <div class="w-12 h-12 rounded-full border-2 flex items-center justify-center mb-2 bg-gray-300 border-gray-400">
                    <span class="text-xl">üìä</span>
                </div>
                <p class="text-xs text-center text-gray-600">Problem Analysis</p>
            </div>
            <div class="flex flex-col items-center flex-1" id="stage2">
                <div class="w-12 h-12 rounded-full border-2 flex items-center justify-center mb-2 bg-gray-300 border-gray-400">
                    <span class="text-xl">üîç</span>
                </div>
                <p class="text-xs text-center text-gray-600">Tool Research</p>
            </div>
            <div class="flex flex-col items-center flex-1" id="stage3">
                <div class="w-12 h-12 rounded-full border-2 flex items-center justify-center mb-2 bg-gray-300 border-gray-400">
                    <span class="text-xl">üéØ</span>
                </div>
                <p class="text-xs text-center text-gray-600">Solution Curation</p>
            </div>
            <div class="flex flex-col items-center flex-1" id="stage4">
                <div class="w-12 h-12 rounded-full border-2 flex items-center justify-center mb-2 bg-gray-300 border-gray-400">
                    <span class="text-xl">üìù</span>
                </div>
                <p class="text-xs text-center text-gray-600">Report Generation</p>
            </div>
        </div>

        <!-- Estimated time -->
        <div class="mt-6 text-center">
            <p class="text-sm text-gray-500">
                Estimated time remaining: <span class="font-semibold" id="time-remaining">60 seconds</span>
            </p>
        </div>

        <!-- Control buttons for testing -->
        <div class="mt-8 p-4 bg-gray-50 rounded border border-gray-200">
            <p class="text-sm font-semibold mb-2">Test Controls:</p>
            <div class="flex gap-2 flex-wrap">
                <button onclick="simulateStage(1)" class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                    Stage 1
                </button>
                <button onclick="simulateStage(2)" class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                    Stage 2
                </button>
                <button onclick="simulateStage(3)" class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                    Stage 3
                </button>
                <button onclick="simulateStage(4)" class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                    Stage 4
                </button>
                <button onclick="simulateComplete()" class="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600">
                    Complete
                </button>
                <button onclick="simulateRealTime()" class="px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600">
                    Simulate Real-Time
                </button>
                <button onclick="reset()" class="px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600">
                    Reset
                </button>
            </div>
        </div>
    </div>

    <script>
        const stages = [
            { id: 'stage1', name: 'Problem Analysis', description: 'Analyzing your business context and identifying key opportunities...', progress: 25 },
            { id: 'stage2', name: 'Tool Research', description: 'Researching AI tools that match your specific needs...', progress: 50 },
            { id: 'stage3', name: 'Solution Curation', description: 'Curating personalized solutions with ROI calculations...', progress: 75 },
            { id: 'stage4', name: 'Report Generation', description: 'Generating your executive-ready implementation report...', progress: 100 }
        ];

        let currentProgress = 0;
        let timeRemaining = 60;
        let timeInterval;

        function updateProgress(progress) {
            currentProgress = progress;
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            
            progressBar.style.width = `${progress}%`;
            progressText.style.left = `${Math.min(progress, 95)}%`;
            progressText.innerHTML = `<span class="text-xs font-bold text-gray-700">${progress}%</span>`;
        }

        function updateStageIndicator(stageNum, status) {
            const stageEl = document.getElementById(`stage${stageNum}`);
            const indicatorEl = stageEl.querySelector('div');
            const textEl = stageEl.querySelector('p');
            
            indicatorEl.className = 'w-12 h-12 rounded-full border-2 flex items-center justify-center mb-2 transition-all duration-500';
            
            if (status === 'completed') {
                indicatorEl.classList.add('bg-green-500', 'border-green-600');
                indicatorEl.innerHTML = '<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>';
                textEl.classList.add('font-bold', 'text-gray-900');
            } else if (status === 'active') {
                indicatorEl.classList.add('bg-blue-500', 'border-blue-600', 'animate-pulse', 'scale-110');
                indicatorEl.innerHTML = '<div class="w-5 h-5 bg-white rounded-full animate-ping"></div>';
                textEl.classList.add('font-bold', 'text-gray-900');
            } else {
                indicatorEl.classList.add('bg-gray-300', 'border-gray-400');
                indicatorEl.innerHTML = `<span class="text-xl">${stages[stageNum - 1] ? stages[stageNum - 1].id === 'stage1' ? 'üìä' : stages[stageNum - 1].id === 'stage2' ? 'üîç' : stages[stageNum - 1].id === 'stage3' ? 'üéØ' : 'üìù' : ''}</span>`;
                textEl.classList.remove('font-bold', 'text-gray-900');
                textEl.classList.add('text-gray-600');
            }
        }

        function updateDescription(text) {
            document.getElementById('stage-description').textContent = text;
        }

        function updateTimeRemaining(seconds) {
            timeRemaining = seconds;
            document.getElementById('time-remaining').textContent = `${seconds} seconds`;
        }

        function simulateStage(stageNum) {
            // Reset all stages
            for (let i = 1; i <= 4; i++) {
                if (i < stageNum) {
                    updateStageIndicator(i, 'completed');
                } else if (i === stageNum) {
                    updateStageIndicator(i, 'active');
                } else {
                    updateStageIndicator(i, 'pending');
                }
            }
            
            const stage = stages[stageNum - 1];
            updateDescription(stage.description);
            updateProgress(stage.progress - 15); // Show in-progress
            
            // Simulate progress within the stage
            setTimeout(() => {
                updateProgress(stage.progress);
            }, 500);
        }

        function simulateComplete() {
            for (let i = 1; i <= 4; i++) {
                updateStageIndicator(i, 'completed');
            }
            updateDescription('Your report is ready!');
            updateProgress(100);
            updateTimeRemaining(0);
        }

        function reset() {
            clearInterval(timeInterval);
            currentProgress = 0;
            timeRemaining = 60;
            updateProgress(0);
            updateTimeRemaining(60);
            updateDescription('Initializing report generation...');
            for (let i = 1; i <= 4; i++) {
                updateStageIndicator(i, 'pending');
            }
        }

        function simulateRealTime() {
            reset();
            let stage = 0;
            let startTime = Date.now();
            
            const simulate = () => {
                const elapsed = (Date.now() - startTime) / 1000;
                const progress = Math.min(100, (elapsed / 60) * 100);
                
                updateProgress(Math.floor(progress));
                updateTimeRemaining(Math.max(0, Math.floor(60 - elapsed)));
                
                if (progress < 25) {
                    if (stage !== 1) {
                        stage = 1;
                        simulateStage(1);
                    }
                } else if (progress < 50) {
                    if (stage !== 2) {
                        stage = 2;
                        simulateStage(2);
                    }
                } else if (progress < 75) {
                    if (stage !== 3) {
                        stage = 3;
                        simulateStage(3);
                    }
                } else if (progress < 100) {
                    if (stage !== 4) {
                        stage = 4;
                        simulateStage(4);
                    }
                } else {
                    simulateComplete();
                    clearInterval(timeInterval);
                }
            };
            
            timeInterval = setInterval(simulate, 500);
            simulate(); // Run immediately
        }
    </script>
</body>
</html>